<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Not Uber</title>
        <link rel="stylesheet" href="style.css">

        <script src="https://maps.googleapis.com/maps/api/js" async defer>
        </script>

        <script type="text/javascript">
            var latitude;
            var longitude;
            var mydata;

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    latitude = position.coords.latitude;
                    longitude = position.coords.longitude;
                    mydata = "username=OGyGLT4c&lat=" + latitude + "&lng=" + longitude;

                    console.log(mydata);

                    FuckTime();

                    // document.getElementById("latitude").innerHTML = latitude;
                    // document.getElementById("longitude").innerHTML = longitude;
                })
            } else {
                document.getElementById("latitude").innerHTML = "Nope";
            }

            function initMap() {
                map = new google.maps.Map(document.getElementById("map"));
                map.setCenter(new google.maps.LatLng(latitude, longitude));
                map.setZoom(14);
            }

            function FuckTime() {
                request = new XMLHttpRequest();

                request.open("POST", "https://defense-in-derpth.herokuapp.com/submit", true);

                request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                request.onreadystatechange = function() {
                    if (request.readyState == 4 && request.status == 200) {
                        data = JSON.parse(request.responseText);

                        console.log(data);
                    }
                }

                request.send(mydata);
            }
        </script>
    </head>

    <body onload="initMap()">
        <h1>Not Uber</h1>

        <h2 id="latitude"></h2>
        <h2 id="longitude"></h2>

        <div id="map" style="height:800px">Map goes here</div>

        <div id="datagoeshere">Data goes here</div>

    </body>
</html>
